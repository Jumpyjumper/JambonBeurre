/*
* name:Jambonbeurre
* version: 0.4.0 (May-28, 2015)

* dependencies:
  - jquery-~1.9
  - iscroll-~5.1.3
  - requirejs-~2.1.17
  - hammerjs-~2.0.4

* description: Hamburger menu for mobile and desktop
*/


define(["jquery"],function(a){var b=function(b){this.opts={timeout:300,scroll:!0,gesture:!0,click:!0,scrollbars:!0,mouseWheel:!0,gestureevent:"press",scrollcontainer:".jb-scroll-container",menu:".jb-menu",stickyheader:".jb-sticky-header",triggers:[".jb-trigger",".jb-shield"],content:".jb-content",keys:[32,33,34,35,36,37,38,39,40]},this.init=function(){var c=this,d=a.extend({},this.opts,b);c.domReady(d),c.menuGesture(d),c.menuScroll(d),c.setTriggers(d)},this.domReady=function(b){a(document).ready(function(){a("body").attr("data-jb-state","closed"),a("body").attr("data-jb-ready","true"),a(b.content).append('<div class="jb-shield"></div>')})},this.setTriggers=function(b){self=this,a(document).ready(function(){a(b.triggers.join()).on("click.jb-menu",function(b){b.preventDefault(),a("body[data-jb-state*=open]").length>0?self.hideMenu():self.showMenu()})})},this.menuGesture=function(b){b.gesture&&require(["hammerjs"],function(c){delete c.defaults.cssProps.userSelect,a(document).ready(function(){var d=new c(a(b.content).get(0),b);d.on(b.gestureevent,function(c){"open"==a("body").attr("data-jb-state")?self.hideMenu(b):self.showMenu(b)})})})},this.menuScroll=function(b){b.scroll&&require(["iscroll"],function(){"undefined"!=typeof IScroll&&a(b.menu+">"+b.scrollcontainer).length>0&&b.scroll&&(b.menu_scroll=new IScroll(".jb-menu",b)),a(window).on("resize",function(a){b.menu_scroll.refresh()})})},this.isTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window},this.hideMenu=function(){self=this,a("body").attr("data-jb-state","animate closed"),self.isTouchDevice()&&a(self.opts.stickyheader).css({position:"fixed",top:0}),setTimeout(function(){a("body").attr("data-jb-state","closed")},300),self.stopAnimation(),self.enableScroll()},this.showMenu=function(){self=this,a("body").attr("data-jb-state","animate open"),self.isTouchDevice()&&a(self.opts.stickyheader).css({position:"absolute",top:a("body").scrollTop()}),setTimeout(function(){a("body").attr("data-jb-state","open")},300),self.stopAnimation(),self.disableScroll()},this.preventDefault=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1},this.keyDown=function(a){for(var b=self.opts.keys.length;b--;)if(a.keyCode===self.opts.keys[b])return void self.preventDefault(a)},this.wheel=function(a){self.preventDefault(a)},this.windowscroll=function(a,b){window.scrollTo(window.scrollbarhorizontalposition,window.scrollbarverticalposition)},this.disableScroll=function(){window.scrollbarhorizontalposition=window.pageXOffset||document.documentElement.scrollLeft,window.scrollbarverticalposition=window.pageYOffset||document.documentElement.scrollTop,window.addEventListener&&(window.addEventListener("DOMMouseScroll",self.wheel,!1),window.addEventListener("scroll",self.windowscroll,!1)),window.onmousewheel=document.onmousewheel=self.wheel,document.onkeydown=self.keyDown,document.ontouchmove=function(a){self.preventDefault(a)}},this.enableScroll=function(){window.removeEventListener&&(window.removeEventListener("DOMMouseScroll",self.wheel,!1),window.removeEventListener("scroll",self.windowscroll,!1)),window.onmousewheel=document.onmousewheel=document.onkeyDown=null,document.ontouchmove=function(a){return!0}},this.stopAnimation=function(){setTimeout(function(){a("body").removeClass("is-nav-animate")},751)},this.init()};return b});
//# sourceMappingURL=jambonbeurre.min.js.map